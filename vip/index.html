
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
  <meta name="HandheldFriendly" content="true">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link href='http://fonts.googleapis.com/css?family=Fredericka+the+Great|Love+Ya+Like+A+Sister|Vast+Shadow|Della+Respira|Marcellus|Galindo|The+Girl+Next+Door|Montserrat+Subrayada|Stalemate|Rock+Salt|Dawning+of+a+New+Day' rel='stylesheet' type='text/css'/>
	<title>VIP</title>
  <link rel="stylesheet" href="css/improv.css" type="text/css"/>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0-rc.1/jquery.mobile.structure-1.4.0-rc.1.min.css" />


	<style>
      body{
        background: linear-gradient(#33CC33, #3399FF, #33CC33);
      }
      /* Overriding jquery mobile button styles */
      div.bbplayer > button.bb-play {
        display: inline-block;
        vertical-align: middle;
        height: 65px;
        width:  65px;
        border: 5px solid #CFCFCF;
        border-radius: 50%; 
        background: transparent; 
        background-image: url('images/play_med.png');
        background-repeat: no-repeat;
        background-position: 7px center;
        cursor: pointer;
      }

      div.bbplayer > button.bb-playing {
        vertical-align: middle;
        background-image: url('images/pause.png');
        background-position: center center;
      }

      div.bbplayer > button.bb-forward {
        vertical-align: middle;
        display: inline-block;
        height: 32px;
        width:  32px;
        background: transparent;
        background-image: url('images/forward.png');
        background-position: center;
        background-repeat: no-repeat;
        cursor: pointer;
      }

      div.bbplayer > button.bb-rewind {
        vertical-align: middle;
        display: inline-block;
        height: 32px;
        width:  32px;
        background: transparent;
        background-image: url('images/rewind.png');
        background-position: center;
        background-repeat: no-repeat;
        cursor: pointer;
      }


			img{
				width: 100%;
				height: auto;
			}


			p.fancy{
			 font-size: 20px;
			 text-align: center;
			 color: #FFFF66;
			 border-color: indigo;
			 letter-spacing: 2px;
			 word-spacing: 2px;
			 text-shadow: 2px 2px #3399FF;
			}
			
      h3{
          font-size: 24px;
          margin-bottom: -15px;
      }
      p{
          font-size: 16px;
      }

		</style>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.0-rc.1/jquery.mobile-1.4.0-rc.1.min.js"></script>
    <script>
      /*global $, document, alert*/

      (function () {


        // Track multiple players on the page
        var bbplayers = [];


        // Stop all other bbplayers on page when starting another
        function stopAllBBPlayers() {
          var i = 0;
          for (i = 0; i < bbplayers.length; i++) {
            bbplayers[i].pause();
            bbplayers[i].updateDisplay();
          }
        }

        //Pad a number with leading zeros
        function zeroPad(number, places) {
          var zeros = places - number.toString().length + 1;
          return new Array(+(zeros > 0 && zeros)).join("0") + number;
        }


        // Convert seconds to mm:ss format
        function toTimeString(seconds) {
          if (isNaN(seconds)) {
            return "--:--";
          }
          var minutes = Math.floor(seconds / 60);
          seconds = seconds - minutes * 60;
          return zeroPad(minutes, 2) + ":" + zeroPad(seconds, 2);
        }


        // Parse out file name from path, unescape
        function parseTitle(path) {
          path = decodeURI(path);
          return path.split('/').pop().split('.').shift();
        }

        // Object to represent bbplayer
        var BBPlayer = function (bbplayer) {
          this.bbplayer  = bbplayer;
          this.bbaudio   = bbplayer.find("audio");
          this.bbdebug   = bbplayer.find(".bb-debug");
          this.bbaudio.get(0).preload = "auto"; // seems not to preload on many mobile browsers.
          this.state     = "paused"; // TODO enum states
          this.trackList = [];
          this.init();
        };


        // Debug logger
        BBPlayer.prototype.log = function (msg) {
          if (this.bbdebug) {
            this.bbdebug.append(msg + "<br>");
            this.bbdebug.scrollTop(this.bbdebug.prop('scrollHeight') - this.bbdebug.height());
          }
        };


        // say if audio element can play file type
        BBPlayer.prototype.canPlay = function (extension) {
          var audioElem = this.bbaudio.get(0);
          if ((/mp3/i).test(extension) && audioElem.canPlayType('audio/mpeg')) {
            return true;
          }
          if ((/ogg/i).test(extension) && audioElem.canPlayType('audio/ogg')) {
            return true;
          }
          if ((/wav/i).test(extension) && audioElem.canPlayType('audio/wav')) {
            return true;
          }
          return false;
        };


        // Set up multiple sources as track list,
        // Remove duplicate and unplayable sources
        BBPlayer.prototype.loadSources = function () {
          var self = this;
          self.log('func: loadSources');
          self.bbaudio.find("source").each(function (x) {
            var fileName  = $(this).attr('src').split('/').pop();
            var extension = fileName.split('.').pop();
            var trackName = fileName.split('.').shift();
            var playable  = self.canPlay(extension);
            var audioElem = self.bbaudio.get(0);
            if ($.inArray(trackName, self.trackList) === -1 && playable === true) {
              self.trackList.push(trackName);
            } else {
              $(this).remove();
            }
          });
        };


        // Update display
        BBPlayer.prototype.updateDisplay = function () {
          var audioElem = this.bbaudio.get(0);
          var duration  = toTimeString(Math.ceil(audioElem.duration));
          var elapsed   = toTimeString(Math.ceil(audioElem.currentTime));
          var title     = parseTitle(audioElem.currentSrc);
          this.bbplayer.find('.bb-trackLength').html(duration);
          this.bbplayer.find('.bb-trackTime').html(elapsed);
          this.bbplayer.find('.bb-trackTitle').html(title);
        };


        // Set current source for audio to given track number
        BBPlayer.prototype.loadTrack = function (trackNumber) {
          var source  = this.bbaudio.find("source").eq(trackNumber).attr('src');
          this.bbaudio.get(0).src = source;
          this.currentTrack = trackNumber;
          this.log('func: loadTrack: loaded ' + source);
        };


        // Load next track in playlist
        BBPlayer.prototype.loadNext = function () {
          this.log('func: loadNext');
          var trackCount = this.bbaudio.find("source").length;
          var newTrack   = ((1 + this.currentTrack) % trackCount);
          this.loadTrack(newTrack);
        };


        // Load previous track in playlist
        BBPlayer.prototype.loadPrevious = function () {
          this.log('func: loadPrevious');
          var trackCount = this.bbaudio.find('source').length;
          var newTrack = (this.currentTrack + (trackCount - 1)) % trackCount;
          this.loadTrack(newTrack);
        };


        // Set up event handlers for audio element events
        BBPlayer.prototype.setAudioEventHandlers = function () {

          var self = this;
          self.log('func: setAudioEventHandlers');

          self.bbaudio.on('abort', function () {
            self.log('event: audio abort');
          });

          // Update display and continue play when song has loaded
          self.bbaudio.on('canplay', function () {
            self.log('event: audio canplay');
            if (self.state === 'playing' && $(this).get(0).paused) {
              $(this).get(0).play();
            }
            self.updateDisplay();
          });

          self.bbaudio.on('canplaythrough', function () {
            self.log('event: audio canplaythrough');
          });

          self.bbaudio.on('durationchange', function () {
            self.log('event: audio durationchange');
          });

          self.bbaudio.on('emptied', function () {
            self.log('event: audio emptied');
          });

          // Load next track when current one ends
          self.bbaudio.on('ended', function () {
            self.log('event: audio ended');
            self.loadNext();
          });

          self.bbaudio.on('error', function () {
            self.log('event: audio error');
          });

          self.bbaudio.on('loadeddata', function () {
            self.log('event: audio loadeddata');
          });

          self.bbaudio.on('loadedmetadata', function () {
            self.log('event: audio loadedmetadata');
          });

          self.bbaudio.on('loadstart', function () {
            self.log('event: audio loadstart');
          });

          self.bbaudio.on('pause', function () {
            self.log('event: audio pause');
          });

          self.bbaudio.on('play', function () {
            self.log('event: audio play');
          });

          self.bbaudio.on('playing', function () {
            self.log('event: audio playing');
          });

          self.bbaudio.on('progress', function () {
            self.log('event: audio progress');
          });

          self.bbaudio.on('ratechange', function () {
            self.log('event: audio ratechange');
          });

          self.bbaudio.on('seeked', function () {
            self.log('event: audio seeked');
          });

          self.bbaudio.on('seeking', function () {
            self.log('event: audio seeking');
          });

          self.bbaudio.on('stalled', function () {
            self.log('event: audio stalled');
          });

          self.bbaudio.on('suspend', function () {
            self.log('event: audio suspend');
          });

          self.bbaudio.on('timeupdate', function () {
            // self.log('event: audio timeupdate');
            self.updateDisplay();
          });

          self.bbaudio.on('volumechange', function () {
            self.log('event: audio volumechange');
          });

          self.bbaudio.on('waiting', function () {
            self.log('event: audio waiting');
          });

        };


        // Change BBPlayer to play state
        BBPlayer.prototype.play = function () {
          stopAllBBPlayers();
          var self = this;
          self.log('func: play');
          self.bbaudio.get(0).play();
          self.state = "playing";
          var playButton = self.bbplayer.find(".bb-play");
          playButton.removeClass("bb-paused");
          playButton.addClass("bb-playing");
        };


        // Change BBPlayer to pause state
        BBPlayer.prototype.pause = function () {
          this.log('func: pause');
          this.bbaudio.get(0).pause();
          this.state = "paused";
          var playButton = this.bbplayer.find(".bb-play");
          playButton.removeClass("bb-playing");
          playButton.addClass("bb-paused");
        };


        // Set up button click handlers
        BBPlayer.prototype.setClickHandlers = function () {

          var self = this;
          self.log('func: setClickHandlers');
          var audioElem = self.bbaudio.get(0);

          // Activate fast-forward
          self.bbplayer.find('.bb-forward').click(function () {
            self.log('event: click .bb-forward');
            self.loadNext();
          });

          // Toggle play / pause
          self.bbplayer.find('.bb-play').click(function () {
            self.log('event: click .bb-play');
            if (self.state === "paused") { //(audioElem.paused) {
              self.play();
            } else {
              self.pause();
            }
            self.updateDisplay();
          });

          // Activate rewind
          self.bbplayer.find('.bb-rewind').click(function () {
            self.log('event: click .bb-rewind');
            var time = audioElem.currentTime;
            if (time > 1.5) {
              audioElem.currentTime = 0;
            } else {
              self.loadPrevious();
            }
          });

          // TODO make debug more "pluggy".
          if (self.bbdebug) {
            self.bbdebug.click(function () {
              $(this).empty();
            });
          }

        };


        // BBPlayer initialisation
        BBPlayer.prototype.init = function () {
          var self = this;
          self.setAudioEventHandlers();
          self.loadSources();
          // self.loadTrack (0);
          self.currentTrack = 0;
          self.setClickHandlers();
          self.updateDisplay();
        };


        // Create BBPlayer Object for each element of .bbplayer class
        $(document).ready(function () {
          $(".bbplayer").each(function (x) {
            bbplayers[x] = new BBPlayer($(this));
          });
        });

      }());

    </script>      
	</head>
	<body>

    <!-- TBF Radio Feature-->
  <center>
    <div id="control-panel">
      <div class="bbplayer">
        <button class="bb-rewind"></button>
        <button class="bb-play"></button>
        <button class="bb-forward"></button>
        <span class="bb-trackTime">--:--</span> 
        <span class="bb-trackLength">--:--</span>
        <br>
        <span class="bb-trackTitle"></span>
        <audio>
          <source src="media/TBF - Lowtone.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Happy New Year.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Out Of Body.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Adaptation (Remix).mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Do You Care.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - DnB.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Follow Your Bliss.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Magic is Real (Make Yourself).mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Reactions.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Spaceship Earth.mp3" type="audio/mpeg"></source>
          <source src="media/TBF - Share (Intro).mp3" type="audio/mpeg"></source>
          <source src="media/TBF - You Are Love.mp3" type="audio/mpeg"></source>

          HTML5 Audio Not Available
        </audio>
        <br>
          <p></p>
          <p></p>
        <p></p>
        <p></p>
        <p></p>
        <p></p>  
      </div>

    <!-- End of TBF Radio -->

    <!-- TBF TV Feature -->
    <div data-role="content">
      <iframe min-width="320" max-width="500" width="100%" height="311px" src="https://www.youtube.com/embed/vT_FFjW1igs" frameborder="0" allowfullscreen></iframe>
      <br>

      <!--Sponsorship Button -->
      <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="hosted_button_id" value="U6Y7QDVN9MLFS">
        <input type="image" src="http://www.bandfamous.com/vip/img/Donations_ThankYou_HappyGrateful_.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">

      </form>
    </div>
    <!-- End of TBF.TV Feature -->

  </center>           
<!-- End of Sponsorship Button -->
<!-- VIP Page -->

  <script src="http://code.jquery.com/jquery.js"></script>
  <script src="http://code.jquery.com/jquery-2.0.0.js"></script>
  <script src="js/bbplayer.js"></script>

 

	</body>
</html>